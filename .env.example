# Microblog Backend Environment Variables
# Copy this file to .env and update with your local values
# DO NOT commit .env to version control

# ============================================================================
# Database Configuration (Primary PostgreSQL)
# ============================================================================
# These are used for the main application database (users, posts, follows)
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USERNAME=postgres
DATABASE_PASSWORD=postgres
# Optional: Full connection string (overrides individual settings above)
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/microblog_development

# ============================================================================
# Read Replica Configuration (Optional)
# ============================================================================
# In development, these typically point to the same database as primary
# In production, these should point to a read replica server
REPLICA_HOST=localhost
REPLICA_PORT=5432
# REPLICA_USERNAME=postgres  # Optional, defaults to DATABASE_USERNAME
# REPLICA_PASSWORD=postgres  # Optional, defaults to DATABASE_PASSWORD

# ============================================================================
# Solid Databases Configuration
# ============================================================================
# These are separate PostgreSQL databases for Solid Cache, Queue, and Cable
# Each uses dedicated credentials for security and isolation

# Solid Cache (Application caching)
CACHE_DB_HOST=localhost
CACHE_DB_PORT=5432
CACHE_DB_USERNAME=microblog_cache
CACHE_DB_PASSWORD=cache_password

# Solid Queue (Background job processing)
QUEUE_DB_HOST=localhost
QUEUE_DB_PORT=5432
QUEUE_DB_USERNAME=microblog_queue
QUEUE_DB_PASSWORD=queue_password

# Solid Cable (WebSocket connections)
CABLE_DB_HOST=localhost
CABLE_DB_PORT=5432
CABLE_DB_USERNAME=microblog_cable
CABLE_DB_PASSWORD=cable_password

# ============================================================================
# Rails Configuration
# ============================================================================
# Rails master key (required for production, optional in development)
# Get from config/master.key or generate with: bin/rails secret
# RAILS_MASTER_KEY=your_master_key_here

# Rails secret key base (auto-generated in development if not set)
# Generate with: bin/rails secret
# SECRET_KEY_BASE=your_secret_key_base_here

# Rails environment (development, test, production)
RAILS_ENV=development

# ============================================================================
# Application Configuration
# ============================================================================
# Frontend URL (required for CORS in production)
# In development, CORS allows localhost:3001, localhost:5173, localhost:5174
# In production, set this to your frontend domain
# FRONTEND_URL=https://your-frontend-domain.com

# Run Solid Queue workers in Puma process (recommended for horizontal scaling)
# Set to "true" to run jobs in Puma, or "false" to run in separate process
SOLID_QUEUE_IN_PUMA=true

# Disable rate limiting (for development/testing only)
# Set to "true" to disable Rack::Attack rate limiting
# DISABLE_RACK_ATTACK=false

# ============================================================================
# Docker Configuration (Optional)
# ============================================================================
# These are used when running with Docker Compose
# Docker Compose will use these values or fall back to defaults in docker-compose.yml

# PostgreSQL superuser for setup scripts (usually "postgres" on Linux, your username on macOS)
# PGUSER=postgres

# ============================================================================
# Notes
# ============================================================================
# - In development, many of these have sensible defaults
# - For production, you MUST set: RAILS_MASTER_KEY, SECRET_KEY_BASE, FRONTEND_URL
# - Database passwords should be strong in production
# - See docs/037_SOLID_DATABASES_SETUP.md for detailed database setup instructions
# - See docs/055_DEPLOYMENT_GUIDE.md for production deployment configuration
